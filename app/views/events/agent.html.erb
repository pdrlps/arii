<% content_for :title, "Events page #{params[:page]} - #{ENV["APP_TITLE"]}" %>
<% unless flash[:notice].nil? then %>
<div data-alert class="alert-box warning radius">
  <%= flash[:notice].html_safe %>
  <a href="#" class="close">&times;</a>
</div>
<% end %>
<div class="small-12 medium-12 large-12 columns">
  <div class="row">
    <div class="small-6 columns left">
      <h3 class="subheader">Events for <%= @agent.title %></h3>
    </div>
    <div class="small-6 columns right">

    </div>
  </div>
  <div class="row">
    <div class="small-12 columns">
      <table>
        <thead>
          <tr>
            <th><h3>Event</h3></th>
            <th><h3>Payload</h3></th>
            <th><h3>Created</h3></th>
          </tr>
        </thead>
        <tbody>
          <% @events.each do |event| %>
          <tr>
            <td><%= link_to event.id, event %></td>
            <td><%= truncate(event.payload.to_s, length: 256, omission: link_to(' ... (continued)', event), escape: false ) %></td>
            <td><%= event.created_at %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="small-12 pagination-centered">
      <%= paginate @events, :remote => true%>
    </div>
  </div>
</div>